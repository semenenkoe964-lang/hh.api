{% extends 'base.html' %}

{% block title %}Каталог вакансий{% endblock %}

{% block content %}
    <h2>Все вакансии ({{ vacancies_count }})</h2>

    {% if vacancies %}
        {% for vacancy in vacancies %}
        <div style="border: 1px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 5px;">
            <h3><a href="{% url 'work_detail' vacancy.id %}">{{ vacancy.name }}</a></h3>
            {% if vacancy.salary_lower %}
                <p><strong>Зарплата:</strong> {{ vacancy.salary_lower }}–{{ vacancy.salary_upper }} рублей</p>
            {% endif %}
            <p><strong>Компания:</strong> {{ vacancy.employer.name }}</p>
            <p><strong>Регион:</strong> {{ vacancy.city.name }}</p>
        </div>
        {% endfor %}

        <!-- Пагинация -->
        <div style="margin-top: 30px; text-align: center;">
            {% if vacancies.has_previous %}
                <a href="?page=1" style="margin: 0 8px;">&laquo; Первая</a>
                <a href="?page={{ vacancies.previous_page_number }}" style="margin: 0 8px;">Назад</a>
            {% endif %}

            <span style="margin: 0 16px;">
                Страница {{ vacancies.number }} из {{ vacancies.paginator.num_pages }}
            </span>

            {% if vacancies.has_next %}
                <a href="?page={{ vacancies.next_page_number }}" style="margin: 0 8px;">Вперёд</a>
                <a href="?page={{ vacancies.paginator.num_pages }}" style="margin: 0 8px;">Последняя &raquo;</a>
            {% endif %}
        </div>

    {% else %}
        <p>Вакансий пока нет.</p>
    {% endif %}
{% endblock %}